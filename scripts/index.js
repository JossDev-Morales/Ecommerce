
let Menu = {
    "churros": [

        {"Precio":25,"nombre":"Churro De Canela","imgurl":"../sources/Menu/churros/churro-canela.jfif","leyenda":"Machurro secreta, canela, azucar y extracto de manzana.","tipo":"No relleno","id":"01C"},

        {"Precio":30,"nombre":"Churri-Bytes","imgurl":"../sources/Menu/churros/churri-bytes.png","tipo":"No relleno","leyenda":"Mini-Churros preparados con masa tradicional, espolvoreados de azucar glass, acompañados de un topping con sabor a elegir.","id":"02C"},

        {"Precio":30,"nombre":"Rainbow Churros ","imgurl":"../sources/Menu/churros/rainbow.png","tipo":"No relleno","leyenda":"Churros preparados con la masa secreta, espolvoreados con azucar glass y rellenos de sabores variados.","id":"03C"},

        {"Precio":50,"nombre":"Maxi-Churro especial","imgurl":"../sources/Menu/churros/maxi-churro.png","tipo":"No relleno","leyenda":"Un churro gigante (28 cm) preparado de masa secreta, acompañado de crema batida por encima y adicionado con salsa de chocolate.","id":"04C"},

        {"Precio":50,"nombre":"Choco Churro","imgurl":"../sources/Menu/churros/Choco-Churros.png","tipo":"relleno","leyenda":"Mini-Churros preparados con masa secreta, espolvoreados de azucar glass y rellenos de un sabor a elegir.","id":"05C"}, 
        
        {"Precio":50,"nombre":"Sandwi-Churro","imgurl":"../sources/Menu/churros/sandwi-churro.png","tipo":"no relleno","leyenda":"Sándwich de helado preparado con tapas hechas de churro elaboradas de masa tradicional y relleno de helado con sabor a elegir.","id":"06C"},
        
        {"Precio":50,"nombre":"Churri-Trio","imgurl":"../sources/Menu/churros/churri-trio.png","tipo":"no relleno","leyenda":"Mini-Churros preparados con masa secreta, espolvoreados de azucar glass y rellenos de un sabor a elegir.","id":"07C"},
        
        {"Precio":50,"nombre":"CanastySunday","imgurl":"../sources/Menu/churros/canasty-sunday.png","tipo":"relleno","leyenda":"Canasta hecha de churro preparada con masa secreta, espolvoreada con azucar glass junto a una bola de helado con sabor a elegir y acompañados de un toppig a elegir.","id":"08C"},
    ],   
    "aderesos": [
        {"precio":10,"nombre":"Chocolate Souce","imgurl":"../sources/Menu/aderesos/RS-1.jpg","leyenda":"Delicosa salsa de chocolate negro con cocoa.","id":"01A"},

        {"precio":10,"nombre":"dulce Milk&souce","imgurl":"../sources/Menu/aderesos/RS-2.JFIF","leyenda":"Deliciosa Milk-souce, dulce de leche con hojuelas de maiz y vainilla.","id":"02A"},

        {"precio":10,"nombre":"M&M'S Choco souce","imgurl":"../sources/Menu/aderesos/RS-3.JFIF","leyenda":"Deliciosa salsa de chocolate de M%M's con leche y trocitos de M%M's dentro.","id":"03A"},
    
        {"precio":10,"nombre":"Salsa Roja","imgurl":"../sources/Menu/aderesos/RS-4.WEBP","leyenda":"Deliciosa salsa de cereza roja con trocitos de cereza.","id":"04A"},

        {"precio":10,"nombre":"Berry-souce","imgurl":"../sources/Menu/aderesos/RS-5.JFIF","leyenda":"Deliciosa salsa de frutos rojos, Frambuesa, Fresas, Arandanos y Moras con trocitos de fruta.","id":"05A"},

        {"precio":10,"nombre":"StrawBerry & BlueBerry","imgurl":"../sources/Menu/aderesos/RS-6.JFIF","leyenda":"Deliciosa salsa mezcla de Un dulce sabor a Fresa y un fresco sabor a Mora azul.","id":"06A"},

        {"precio":10,"nombre":"Vanilla souce","imgurl":"../sources/Menu/aderesos/RS-7.JFIF","leyenda":"Deliciosa salsa con un peculiar sabor a vainilla, suave y dulce, con dulce de leche, perfecto.","id":"07A"},

        {"precio":10,"nombre":"Mani&Chocolate","imgurl":"../sources/Menu/aderesos/RS-8.JFIF","leyenda":"Deliciosa mezcla entre mantequilla de mani y chocolate, se ve rico pero sabe a gloria.","id":"08A"}
    ],
    "complementos": [
        {"precio":20,"nombre":"Coca-Cola","imgurl":"../sources/Menu/complementos/RS-1.png","leyenda":"Rica y fria Coca-Cola.","id":"01CO"},
        {"precio":30,"nombre":"Late Chocolate & cream","imgurl":"../sources/Menu/complementos/RS-2.JPG","leyenda":"Delicios y espumoso late de chocolate con crema.","id":"02CO"},
        {"precio":30,"nombre":"Late Mazapan","imgurl":"../sources/Menu/complementos/RS-4.JPG","leyenda":"Delicioso y espumoso late de mazapan y leche.","id":"03CO"},
        {"precio":30,"nombre":"Te cereza ","imgurl":"../sources/Menu/complementos/RS-3.jfif","leyenda":"Delicioso Late con adereso de cereza y  crema.","id":"04CO"},
        {"precio":30,"nombre":"Bubble-Tea","imgurl":"../sources/Menu/complementos/RS-5.jfif","leyenda":"Rico Bubble-tea de jazmin y te negro.","id":"05CO"},
        {"precio":30,"nombre":"Bubble-Tea Milk","imgurl":"../sources/Menu/complementos/RS-6.JFIF","leyenda":"Rico Bubble-tea con leche y crema batida.","id":"06CO"},
        {"precio":30,"nombre":"strawBerry Juice","imgurl":"../sources/Menu/complementos/RS-7.jfif","leyenda":"Rico Jugo de Fresa on trocitos de Fresa dentro.","id":"07CO"},
        {"precio":30,"nombre":"BlueBerry Juice","imgurl":"../sources/Menu/complementos/RS-8.jfif","leyenda":"Rico Jugo de Mora Azul, con pequeños trocitos de Mora Azul.","id":"08CO"},
        {"precio":30,"nombre":"Mango Juice","imgurl":"../sources/Menu/complementos/RS-9.jpg","leyenda":"Rico Jugo de Mango con leche y trocitos de frutillas tropicales.","id":"09CO"},
        {"precio":30,"nombre":"Coffe","imgurl":"../sources/Menu/complementos/RS-10.jpg","leyenda":"Delicioso y espumoso cafe americano, crema batida opcional.","id":"010CO"},
        {"precio":30,"nombre":"Pay Cheese&Lemon","imgurl":"../sources/Menu/complementos/RS-11.JFIF","leyenda":"Pay de Queso y Limon, sutil pero delicioso.","id":"011CO"},
        {"precio":30,"nombre":"Pay Berry Mix","imgurl":"../sources/Menu/complementos/RS-12.JFIF","leyenda":"Pay de Queso y Frutos rojos, con un ligero sabor a frutas pero gran sabor a delicia.","id":"012CO"},
        {"precio":30,"nombre":"Soufflé Chocolate","imgurl":"../sources/Menu/complementos/RS-13.jfif","leyenda":"Soufflé de chocolate negro fuerte con un poco de cocoa rallada","id":"013CO"},
        {"precio":30,"nombre":"Soufflé Cream&Vanilla","imgurl":"../sources/Menu/complementos/RS-14.jfif","leyenda":"Soufflé de vainilla con un poco de crema batida con extracto de vainilla.","id":"014CO"},
        {"precio":30,"nombre":"Brownnies","imgurl":"../sources/Menu/complementos/RS-15.jPG","leyenda":"Brownnie de chocolate con relleno de chocolate blanco.","id":"015CO"}
    ]
}
//pre recursos
if(localStorage.getItem("ListaDeseos")==undefined){
    localStorage.setItem("ListaDeseos","[]")
}
if (localStorage.getItem("Orders")==undefined) {
    localStorage.setItem("Orders", "[]")
}
//variables
let feedBtnC=document.querySelector(".Bchurros")
let feedBtnA=document.querySelector(".Baderesos")
let feedBtnCO=document.querySelector(".Bcomplementos")
let feedC = document.querySelector(".Fchurros")
let feedA = document.querySelector(".Faderesos")
let feedCo=document.querySelector(".Fcomplementos")
let newOrderBtn=document.querySelector(".neworder")
let FloatNewO=document.querySelector(".floatNewO")
let newOname= document.querySelector("#name")
let newOpara= document.querySelector("#para")
let clsinputsP=document.querySelector(".clsPara")
let clsinputsN=document.querySelector(".clsName")
let addorder=document.querySelector(".addOrder")
let CancelOrder=document.querySelector(".CancelOrder")
let succes=document.querySelector(".succes")
//funciones
function succesF(reload) {
    succes.classList.add("scsActive")
    
        if (reload===true) {
            setTimeout(()=>{
            
                window.location.reload()
            },2000)
        }
        setTimeout(()=>{succes.classList.remove("scsActive")},2000)
}

function changeFocus(focus,nofocus1,nofcus2) {
    focus.classList.add("focusIF")
    nofocus1.classList.remove("focusIF")
    nofcus2.classList.remove("focusIF")
}
function AddLD(name,id,price,url) {
    const deseoslist=document.createElement("div")
    const imgdeseos =document.createElement("img")
    imgdeseos.setAttribute("src","../sources/png/008-lista-de-deseos.png")
    deseoslist.classList.add("Ditem")
    deseoslist.appendChild(imgdeseos)

    deseoslist.addEventListener("click",()=>{
        const arrItemToAdd={"nombre": name,"precio":price,"url":url,"id":id}
        const getLD=JSON.parse(localStorage.getItem("ListaDeseos"))
        getLD.push(arrItemToAdd)
        localStorage.setItem("ListaDeseos",JSON.stringify(getLD))
        succesF()
    })

    return deseoslist
}
function AddOrden(float) {
    const addorden =document.createElement("div")
    const imgorder= document.createElement("img")
    imgorder.setAttribute("src","/sources/png/006-anadir-al-carrito.png")
    addorden.classList.add("Oitem")
    addorden.appendChild(imgorder)
    
    addorden.addEventListener("click",()=>{
        if (float.children.length==0) {
            const noItemsWL=document.createElement("div")
            noItemsWL.textContent="Aun no tienes ordenes de compra"
            noItemsWL.classList.add("noItemsWL")
            float.insertAdjacentElement("beforeend",noItemsWL)
        }
        float.classList.toggle("focusIF")
    })
    return addorden
} 
function ChurroConstructor(imgC,Titulo,leyenda,precio,id) {
    const ContainerChurro = document.createElement("div")
    ContainerChurro.classList.add("Item")
    ContainerChurro.setAttribute("id",id)
    const imgChurro = document.createElement("img")
    imgChurro.setAttribute("src",imgC)
    imgChurro.classList.add("imgc")
    const tituloChurro= document.createElement("h1")
    tituloChurro.classList.add("TitemC")
    tituloChurro.textContent=Titulo
    const leyendaChurro=document.createElement("div")
    leyendaChurro.classList.add("LitemC")
    leyendaChurro.textContent=leyenda
    const precioChurro=document.createElement("div")
    precioChurro.classList.add("PitemC")
    precioChurro.textContent=precio+" $"
    

    const arritemordtoadd=JSON.parse(localStorage.getItem("Orders"))
    const floatOrden=document.createElement("div")
    floatOrden.classList.add("ItemFLO")
    
    
    
    arritemordtoadd.forEach(element => {
        const orderitem=document.createElement("div")
    const orderitemimg=document.createElement("img")
    orderitemimg.addEventListener("click",()=>{
        const itemData={"name":Titulo,"price":precio,"img":imgC,"id":id}
        const OrdersData=JSON.parse(localStorage.getItem("Orders"))
        OrdersData.forEach(element => {
            if (element.name==orderitem.textContent) {
                element.Order.push(itemData)
                localStorage.setItem("Orders",JSON.stringify(OrdersData))
                succesF()
            }
        });
        
    })
        orderitemimg.setAttribute("src","../sources/png/bag-icon.png")
        orderitem.classList.add("itemorders")
        orderitem.textContent=element.name
        orderitem.insertAdjacentElement("beforeend",orderitemimg)

        floatOrden.insertAdjacentElement("afterbegin",orderitem)
    });
    ContainerChurro.insertAdjacentElement("beforeend",imgChurro)
    ContainerChurro.insertAdjacentElement("beforeend",tituloChurro)
    ContainerChurro.insertAdjacentElement("beforeend",leyendaChurro)
    ContainerChurro.insertAdjacentElement("beforeend",precioChurro)
    ContainerChurro.insertAdjacentElement("beforeend",AddLD(Titulo,id,precio,imgC))
    ContainerChurro.insertAdjacentElement("beforeend",AddOrden(floatOrden))
    ContainerChurro.insertAdjacentElement("beforeend",floatOrden)

    return ContainerChurro
}
//eventos DOM
    feedBtnC.addEventListener("click",()=>{
        changeFocus(feedC,feedA,feedCo)
    })
    feedBtnA.addEventListener("click",()=>{
        changeFocus(feedA,feedC,feedCo)
    })
    feedBtnCO.addEventListener("click",()=>{
        changeFocus(feedCo,feedC,feedA)
    })
    newOrderBtn.addEventListener("click",()=>{
        FloatNewO.classList.add("focusIF")
    })
    clsinputsN.addEventListener("click",()=>{
        newOname.value=""
        
    })
    clsinputsP.addEventListener("click",()=>{
        newOpara.value=""
    })
    addorder.addEventListener("click",()=>{
        const arrOrders=JSON.parse(localStorage.getItem("Orders"))
        if (arrOrders.length<3) {
            if (newOname.value=="") {
                swal("Error","El titulo no puede estar vacio", "error")
               }else{
                if (newOname.value.length<16&&newOname.value.includes(" ")) {
                    const arrNewOrder = {"name": newOname.value,"para": newOpara.value,"Order":[]}
                const getOrders = JSON.parse(localStorage.getItem("Orders"))
                getOrders.push(arrNewOrder)
                localStorage.setItem("Orders",JSON.stringify(getOrders))
        
                FloatNewO.classList.remove("focusIF")
                
                newOname.value=""
                newOpara.value=""
                succesF(true)
                }else if (newOname.value.length<=8&&newOname.value.includes(" ")===false) {
                let arrNewOrder
                let cadena =newOname.value
                newOname.value.lastIndexOf("s")==newOname.value.length-1?arrNewOrder = {"name": cadena.substring(0, cadena.length - 1)+"'s Orden","para": newOpara.value,"Order":[]}:arrNewOrder = {"name": newOname.value+"'s Orden","para": newOpara.value,"Order":[]}
                const getOrders = JSON.parse(localStorage.getItem("Orders"))
                getOrders.push(arrNewOrder)
                localStorage.setItem("Orders",JSON.stringify(getOrders))
        
                FloatNewO.classList.remove("focusIF")
                
                newOname.value=""
                newOpara.value=""
                succesF(true)
                } else {
                    swal("Error","El nombre no puede ser mayor a 15 y debe tener al menos un espcio o debe ser menor a 8","error")
                }
               }
        }else{
            swal("Error", "Solo puedes tener un maximo de 3 Ordenes por usuario","error")
        }
        
    })
    CancelOrder.addEventListener("click",()=>{
        FloatNewO.classList.remove("focusIF")
        newOname.value=""
        newOpara.value=""
    })
//itemsMenu constructor
document.addEventListener("DOMContentLoaded",()=>{
    Menu.churros.forEach(element =>{
        feedC.insertAdjacentElement("beforeend",ChurroConstructor(element.imgurl,element.nombre,element.leyenda,element.Precio,element.id))
    })
    Menu.aderesos.forEach(element => {
        feedA.insertAdjacentElement("beforeend",ChurroConstructor(element.imgurl,element.nombre,element.leyenda,element.precio,element.id))
    });
    Menu.complementos.forEach(element => {
        feedCo.insertAdjacentElement("beforeend",ChurroConstructor(element.imgurl,element.nombre,element.leyenda,element.precio,element.id))
    });
})

/*https://ionic.io/ionicons/usage*/



